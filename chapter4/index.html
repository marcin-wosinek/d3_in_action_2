<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.8/d3.min.js"
      type="text/JavaScript"
    ></script>
  </head>
  <body>
    <div id="viz"><svg style="width:520px;height:520px;"></svg></div>
    <script>
      d3.csv("../data/movies.csv", chart);

      function chart(data) {
        const xScale = d3
            .scaleLinear()
            .domain([1, 8])
            .range([20, 470]),
          yScale = d3
            .scaleLinear()
            .domain([-40, 40])
            .range([480, 20]);

        Object.keys(data[0]).forEach(key => {
          if (key != "day") {
            const movieArea = d3
              .area()
              .x(d => xScale(d.day))
              .y0(d => yScale(d[key]))
              .y1(d => yScale(-d[key]))
              .curve(d3.curveCardinal);

            d3.select("svg")
              .append("path")
              .style("id", key + "Area")
              .attr('d', movieArea(data))
              .attr("fill", "#75739F")
              .attr("stroke", "#75739F")
              .attr("stroke-width", 3)
              .style("opacity", 0.75)
              .style("fill-opacity", 0.5);
          }
        });
      }
    </script>
  </body>
</html>
